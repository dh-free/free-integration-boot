<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.free.es.mapper.ArticleMapper">

    <select id="selectListFull" resultType="com.free.es.model.Article">
        select * from es_article
        <where>
            1=1
            <if test="title!=null and title!=''">
                and title = #{title}
            </if>

            <if test="content!=null and content!=''">
                and content = #{content}
            </if>
            <if test="summary!=null and summary!=''">
                and summary=#{summary}
            </if>

            <if test="author!=null and author!=''">
                and author=#{author}
            </if>
            <if test="keyword!=null and keyword!=''">
                <bind name="pattern" value="'%' + keyword + '%'"/>
                and
                CONCAT(
                IFNull(title,''),
                IFNull(content,''),
                IFNull(summary,''),
                IFNull(author,'')
                )
                like #{pattern}
            </if>
            <if test="startTime!=null and startTime!=''">
                <![CDATA[   and DATE_FORMAT(create_time, '%Y-%m-%d')>=  DATE_FORMAT(#{startTime}, '%Y-%m-%d')   ]]>
            </if>
            <if test="endTime!=null and endTime!=''">
                <![CDATA[  and DATE_FORMAT(create_time, '%Y-%m-%d') <= DATE_FORMAT(#{endTime}, '%Y-%m-%d')    ]]>
            </if>
        </where>
    </select>
</mapper>
